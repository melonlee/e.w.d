var accountID;var pushType = 1;var isNew =1; //默认是新建创建 默认推送var curItemID;var curItemTitle;var curItemUrl;var curItemImageUrl;var curItemType;$(function () {    $("#loader").hide();    $("#push_sinleNews_area").hide();    $("#push_newsList_area_loader").hide();    $("#devUrl").attr("disabled", "true");    $("#msg_thumb").hide();    loadAccounts();    $('#token').bind(        'input propertychange',        function () {            $("#devUrl").val(                "http://ewd.melonlee.com/account/token/"                    + $(this).val() + ".do");        });    bindPushArea();    bindPushBtn();});//设置默认推送中 提交纯文本类型function submitDefaultText() {    $("#text_accountID").val(accountID);    //提交表单    var form = $("#defaultForm_text");    form.submit();}//设置默认推送中 提交富文本类型 title+url+imagefunction submitDefaultNews() {    $("#news_accountID").val(accountID);    var form = $("#defaultForm_news");    form.submit();}function bindPushArea() {    //纯文字    $('#push_text_a').bind('click', function () {        pushType = 1;        if (!$("#push_text").hasClass("active")) {            $("#push_text").addClass("active");            $("#push_singleNews").removeClass("active");            $("#push_newsList").removeClass("active");            $("#push_text_area").show();            $("#push_sinleNews_area").hide();            $("#push_newsList_area_loader").hide();            $("#msg_thumb").hide();            $("#text_content").val("");            if(isNew==1){                $("#text_content").val("");                $("#text_msgID").val("0");            }else{                $("#text_msgID").val(curItemID);                $("#text_content").val(curItemTitle);            }        }    });    //单图文    $('#push_singleNews_a').bind('click', function () {        pushType = 2;        if (!$("#push_singleNews").hasClass("active")) {            $("#push_singleNews").addClass("active");            $("#push_text").removeClass("active");            $("#push_newsList").removeClass("active");            $("#push_text_area").hide();            $("#push_newsList_area_loader").hide();            $("#push_sinleNews_area").show();            if(isNew==1){                $("#news_title").val("");                $("#url").val("");                $("#news_msgID".val("0"));                $("#msg_thumb").hide();            }else{                $("#news_title").val(curItemTitle);                $("#url").val(curItemUrl);                $("#news_msgID".val(curItemID));                $("#msg_thumb").show();                $("#msg_thumb").attr("src", curItemImageUrl);            }        }    });    //多图文    $('#push_newsList_a').bind('click', function () {        pushType = 3;        if (!$("#push_newsList").hasClass("active")) {            $("#push_newsList").addClass("active");            $("#push_text").removeClass("active");            $("#push_singleNews").removeClass("active");            $("#push_newsList_area_loader").show();            $("#push_text_area").hide();            $("#push_sinleNews_area").hide();        }    });}function copy(data) {}function cache(itemID) {    accountID = itemID;}function defaultPush(itemAccountID,itemID,itemTitle,itemImageUrl,itemUrl,itemType) {    accountID = itemAccountID;    alert(itemImageUrl);    if("undefined"!=itemTitle){        isNew=2;        curItemID=itemID;        curItemTitle = itemTitle;        curItemUrl =itemUrl;        curItemImageUrl = itemImageUrl;        curItemType = itemType;        if(curItemType==1){            pushType==1;            $("#text_msgID").val(curItemID);            $("#text_content").val(curItemTitle);        }else if (curItemType ==2){            pushType==2;            $("#push_singleNews").addClass("active");            $("#push_text").removeClass("active");            $("#push_newsList").removeClass("active");            $("#push_text_area").hide();            $("#push_newsList_area_loader").hide();            $("#push_sinleNews_area").show();            $("#news_title").val(curItemTitle);            $("#url").val(curItemUrl);            $("#news_msgID").val(curItemID);            $("#msg_thumb").show();            $("#msg_thumb").attr("src", curItemImageUrl);        }    }else{        isNew=1;        pushType=1;        $("#text_content").val("");        $("#news_title").val("");        $("#url").val("");        $("#news_msgID").val("0");        $("#text_msgID").val("0");        $("#push_text").addClass("active");        $("#push_singleNews").removeClass("active");        $("#push_newsList").removeClass("active");        $("#push_text_area").show();        $("#push_sinleNews_area").hide();        $("#push_newsList_area_loader").hide();    }}function getItem(id, title, token, devUrl) {    $("#id").val(id);    $("#title").val(title);    $("#token").val(token);    $("#devUrl").val(devUrl);}function deleteItem() {    $.ajax({        url: '../account/delete.do',        type: 'GET',        data: {            id: accountID        },        dataType: 'json',        timeout: 1000,        error: function () {            alert('您的网络不稳定请稍后再试,请稍后重试！');        },        success: function (result) {            if (result.status == 1000) {                $("#data" + accountID).remove();            } else if (result.status == 1001) {                alert('您的网络不稳定请稍后再试,请稍后重试1212！');            }        }    });}function loadAccounts() {    $        .ajax({            url: '../account/list.do',            type: 'GET',            data: {},            dataType: 'json',            timeout: 1000,            error: function () {                alert('您的网络不稳定请稍后再试,请稍后重试！');            },            success: function (callBack) {                if (callBack.status == 1000) {                    for (var loop = 0; loop < callBack.result.length; loop++) {                        $("#datas")                            .append(                                "<div id='data"                                    + callBack.result[loop].id                                    + "' class='col-sm-4'> <div class='panel panel-info'> <div class='panel-heading'> <h3 class='panel-title'>#"                                    + (loop + 1)                                    + "."                                    + callBack.result[loop].title                                    + "</h3> </div> <div class='panel-body'> <p>Token:"                                    + callBack.result[loop].token                                    + "</p> <p>开发者模式地址:<a href='javascript:copy(\""                                    + callBack.result[loop].devUrl                                    + "\")' title='点击拷贝到剪贴板'>"                                    + callBack.result[loop].devUrl                                    + "</a></p> <p>创建时间:"                                    + callBack.result[loop].createDate                                    + "</p> <a data-toggle='modal' data-target='#myModal' role='button' class='btn btn-warning' onClick='getItem(\""                                    + callBack.result[loop].id                                    + "\",\""                                    + callBack.result[loop].title                                    + "\",\""                                    + callBack.result[loop].token                                    + "\",\""                                    + callBack.result[loop].devUrl                                    + "\")'>修改</a> <a id='modal-58093' href='#delete' role='button' class='btn btn-danger' data-toggle='modal' onClick='cache(\""                                    + callBack.result[loop].id                                    + "\")'>删除</a> <a data-toggle='modal' data-target='#defaultPush' role='button' class='btn btn-info' onClick='defaultPush(\""                                    + callBack.result[loop].id                                    + "\",\""                                    + callBack.result[loop].defaultMsg.id                                    + "\",\""                                    + callBack.result[loop].defaultMsg.title                                    + "\",\""                                    + callBack.result[loop].defaultMsg.imageUrl                                    + "\",\""                                    + callBack.result[loop].defaultMsg.url                                    + "\",\""                                    + callBack.result[loop].defaultMsg.type                                    + "\")'>默认推送</a> </div> </div> </div>");                    }                } else if (callBack.status == 1001) {                    $("#loader").show();                }            }        });}function clearText() {    $("#id").val("0");    $("#title").val("");    $("#token").val("");    $("#devUrl").val("");}function addAccount() {    clearText();}//绑定设置默认推送页面提交按钮function bindPushBtn() {    $('#pushBtn').bind('click', function () {        if (curItemType == 1) {            //提交为纯文本            submitDefaultText();        } else if (curItemType == 2) {            //提交为富文本            submitDefaultNews();        }    });}